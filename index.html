<html>
<head>
	<title>5e Pickpocketing Calculator</title>
	<script>
		function buildTarget(reward) {
			var targetList= [
						"9 or less - Townsfolk - 1d10 gp per day",
						"10 - Merchants/Tier 1 adventurers - 1d20 gp per day and 5% chance of a special common item",
						"15 - Rich Merchants/Tier 2 adventurers - 2d20 gp per day and 5% chance of special item (60% common, 40% uncommon)",
						"20 - Nobles/Tier 3 adventurers - 2d100 gp per day and 10% chance of special item (50% common, 30% uncommon, 20% rare)",
						"25 - Rich Nobles/Tier 4 adventurers - 200 gp per day and 10% chance of special item (40% common, 30% uncommon, 20% rare, 10% very rare)"
				];
			var victim = document.getElementById("target");

			while (victim.hasChildNodes()) {
 				victim.removeChild(victim.firstChild);
			}

			for (var i = 0; i<=reward; i++){
			    var opt = document.createElement('option');
			    opt.innerHTML = i+" "+targetList[i];
			    victim.appendChild(opt);
			}
		}


		function main () {
			var investigationRoll = document.getElementById("investigation").value;
			var victim = document.getElementById("target");
			var sleightOfHandRoll = document.getElementById("sleightOfHand").value;
			var targetDC = 0;
			var reward = 0;
			var complication = false;




			switch(true) {
  				case investigationRoll == 0:
				    // Do Nothing
			    	break;
  				case investigationRoll<=9 && investigationRoll>0:
			    	targetDC = investigationRoll;
			    	reward = 1;
			    	buildTarget(reward);
			    	victim.options[1].selected = true;
    				break;
  				case investigationRoll==10:
			    	targetDC = 10;
			    	reward = 2;
			    	buildTarget(reward);
			    	victim.options[2].selected = true;
    				break;
  				case investigationRoll<=15 && investigationRoll>10:
			    	targetDC = 15;
			    	reward = 3;
			    	buildTarget(reward);
			    	victim.options[3].selected = true;
    				break;
  				case investigationRoll<=20 && investigationRoll>15:
			    	targetDC = 20;
			    	reward = 4;
			    	buildTarget(reward);
			    	victim.options[4].selected = true;
    				break;
  				case investigationRoll>20:
			    	targetDC = 25;
			    	reward = 5;
			    	buildTarget(reward);
			    	victim.options[5].selected = true;
    				break;
    			default:
    				break;
			}

			if (sleightOfHandRoll > 0) {
				if (sleightOfHandRoll >= targetDC) {
					reward = 1;
					document.getElementById("result").value = "Success";
				} else {
					document.getElementById("result").value = "Fail!";
				}
			}
		}
		

		function playSafe() {
			var index = document.getElementById("target").selectedIndex;

			switch(index) {
				case 1:
					document.getElementById("investigation").value = 9;
					break;
				case 2:
					document.getElementById("investigation").value = 10;
					break;
				case 3:
					document.getElementById("investigation").value = 15;
					break;
				case 4:
					document.getElementById("investigation").value = 20;
					break;
				case 5:
					document.getElementById("investigation").value = 25;
					break;
			}
		}

	</script>
</head>
<body OnLoad='main()'>
	<h1>Pickpocketing Calculator a9</h1>
		<form>
		<table>
			<tr>
				<th>Investigation Roll</th>
				<td>
					<input type=text id='investigation' value='0' size=2 OnChange='main()'>
				</td>
			</tr>
			<tr>
				<th>Target</th>
				<td>
					<select id='target' OnChange='playSafe()'>
						<option>Enter Roll Above</option>
					</select>
				</td>
			</tr>
			<tr>
				<th>Sleight of Hand Roll</th>
				<td>
					<input type=text id='sleightOfHand' value='0' size=2 OnChange='main()'>

				</td>
			</tr>		
			<tr>
				<th>Result</th>
				<td>
					<input type=text id='result' value='' readonly>
				</td>
			</tr>		


		</table>
		<button onclick='main()'>Reset</button>
	</form>
</body>
</html>
